create table library(
id number primary key,
title varchar(30),
author varchar(30),
price number(4)
);

create table library_record (
audit_id number generated by default as identity primary key,
id number,
title varchar(30),
author varchar(30),
price number(4),
action_type varchar(20),
action_date timestamp default current_timestamp
);

insert into library values(1,'SPOS','Kevin',560.75);
insert into library values(2,'TOC','Agarwal',360);
insert into library values(3,'DBMS','Martin',689);
insert into library values(4,'CNS','Lucifer',475);
insert into library values(5,'IOT','Gulliver',760);

create or replace trigger trg_library_update
before update on library
for each row 
begin 
insert into library_record (id,title,author,price,action_type)
 values(:old.id, :old.title, :old.author, :old.price,'update');
end;
/

create or replace trigger trg_library_delete
before delete on library
for each row 
begin 
insert into library_record (id,title,author,price,action_type)
 values(:old.id, :old.title, :old.author, :old.price,'delete');
end;
/

create or replace trigger trg_library_statement_update
after update on library
begin 
insert into library_record (id,title,author,price,action_type)
 values(NULL,NULL,NULL,NULL,'STATEMENT_UPDATE');
end;
/